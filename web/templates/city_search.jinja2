{% extends "base.jinja2" %}

{% block head %}
{% endblock %}

{% block body %}
    <div id="search_div">
    <form action="search form" onsubmit="return false;">
      <input type="text" name="search_input"  onkeydown="if (event.keyCode == 13) document.getElementById('search_btn').click() ">
      <input type="button" id="search_btn" Value="Search" onClick="displayResults(this.form.search_input.value)">
    </form>
</div>
<br>
    <div id="chart_div"></div>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["table"]});

        function displayResults(search_term) {

            var jsonData = $.ajax({
                url: "/api/search?s=" + search_term,
                dataType: "json",
                async: false
            }).responseJSON;

            var data = new google.visualization.DataTable(jsonData);
            var chart = new google.visualization.Table(document.getElementById('chart_div'));
            chart.draw(data);
        }
    </script>
{% endblock %}

{% block tail %}
{% endblock %}
